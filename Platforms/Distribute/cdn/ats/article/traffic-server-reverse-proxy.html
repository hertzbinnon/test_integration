<!DOCTYPE html><html lang="en-US"
prefix="og: https://ogp.me/ns#" ><head><meta charset="UTF-8"><style id="litespeed-ccss">.screen-reader-text{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;word-wrap:normal!important}.grid-100:after,.grid-100:before,.grid-container:after,.grid-container:before,[class*=mobile-grid-]:after,[class*=mobile-grid-]:before,[class*=tablet-grid-]:after,[class*=tablet-grid-]:before{content:".";display:block;overflow:hidden;visibility:hidden;font-size:0;line-height:0;width:0;height:0}.grid-100:after,.grid-container:after,[class*=mobile-grid-]:after,[class*=tablet-grid-]:after{clear:both}.grid-container{margin-left:auto;margin-right:auto;max-width:1200px;padding-left:10px;padding-right:10px}.grid-100,[class*=mobile-grid-],[class*=tablet-grid-]{box-sizing:border-box;padding-left:10px;padding-right:10px}.grid-parent{padding-left:0;padding-right:0}@media (max-width:767px){.mobile-grid-100{clear:both;width:100%}}@media (min-width:768px) and (max-width:1024px){.tablet-grid-100{clear:both;width:100%}}@media (min-width:1025px){.grid-100{clear:both;width:100%}}a,body,div,form,h1,h2,html,label,li,p,span,ul{border:0;margin:0;padding:0}html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}article,aside,header,main,nav{display:block}ul{list-style:none}a{background-color:transparent}body,button,input{font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;text-transform:none;font-size:17px;line-height:1.5}p{margin-bottom:1.5em}h1,h2{font-family:inherit;font-size:100%;font-style:inherit;font-weight:inherit}h1{font-size:42px;margin-bottom:20px;line-height:1.2em;font-weight:400;text-transform:none}h2{font-size:35px;margin-bottom:20px;line-height:1.2em;font-weight:400;text-transform:none}ul{margin:0 0 1.5em 3em}ul{list-style:disc}li>ul{margin-bottom:0;margin-left:1.5em}button,input{font-size:100%;margin:0;vertical-align:baseline}button,input[type=submit]{border:1px solid transparent;background:#55555e;-webkit-appearance:button;padding:10px 20px;color:#fff}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input[type=search]{background:#fafafa;color:#666;border:1px solid #ccc;border-radius:0;padding:10px 15px;box-sizing:border-box;max-width:100%}a,a:visited{text-decoration:none}.screen-reader-text{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute!important;width:1px;word-wrap:normal!important}.entry-content:after,.site-content:after,.site-header:after{content:"";display:table;clear:both}.main-navigation{z-index:100;padding:0;clear:both;display:block}.main-navigation a{display:block;text-decoration:none;font-weight:400;text-transform:none;font-size:15px}.main-navigation ul{list-style:none;margin:0;padding-left:0}.main-navigation .main-nav ul li a{padding-left:20px;padding-right:20px;line-height:60px}.inside-navigation{position:relative}.main-navigation li{float:left;position:relative}.nav-aligned-center .main-navigation:not(.toggled) .menu>li{float:none;display:inline-block}.nav-aligned-center .main-navigation:not(.toggled) ul{letter-spacing:-.31em;font-size:1em}.nav-aligned-center .main-navigation:not(.toggled) ul li{letter-spacing:normal}.nav-aligned-center .main-navigation{text-align:center}.main-navigation ul ul{display:block;box-shadow:1px 1px 0 rgba(0,0,0,.1);float:left;position:absolute;left:-99999px;opacity:0;z-index:99999;width:200px;text-align:left;top:auto;height:0;overflow:hidden}.main-navigation ul ul a{display:block}.main-navigation ul ul li{width:100%}.main-navigation .main-nav ul ul li a{line-height:normal;padding:10px 20px;font-size:14px}.main-navigation .main-nav ul li.menu-item-has-children>a{padding-right:0;position:relative}.menu-item-has-children .dropdown-menu-toggle{display:inline-block;height:100%;clear:both;padding-right:20px;padding-left:10px}.site-header{position:relative}.inside-header{padding:20px 40px}.main-title{margin:0;font-size:25px;line-height:1.2em;word-wrap:break-word;font-weight:700;text-transform:none}.header-widget{float:right;overflow:hidden;max-width:50%}.header-widget .widget{padding:0 0 20px;margin-bottom:0}.header-widget .widget:last-child{padding-bottom:0}.header-aligned-center .site-header{text-align:center}.posted-on .updated{display:none}.byline,.single .byline{display:inline}.entry-content:not(:first-child){margin-top:2em}.entry-header,.site-content{word-wrap:break-word}.entry-title{margin-bottom:0}.entry-meta{font-size:85%;margin-top:.5em;line-height:1.5}.comment-form input{margin-bottom:10px}#cancel-comment-reply-link{padding-left:10px}.widget .search-field{width:100%}.widget_search .search-submit{display:none}.widget{margin:0 0 30px;box-sizing:border-box}.widget:last-child{margin-bottom:0}.post{margin:0 0 2em}.one-container:not(.page) .inside-article{padding:0 0 30px}.one-container .site-content{padding:40px}.gp-icon{display:inline-flex;align-self:center}.gp-icon svg{height:1em;width:1em;top:.125em;position:relative;fill:currentColor}.icon-menu-bars svg:nth-child(2){display:none}.container.grid-container{width:auto}.menu-toggle{display:none}.menu-toggle{padding:0 20px;line-height:60px;margin:0;font-weight:400;text-transform:none;font-size:15px}button.menu-toggle{background-color:transparent;width:100%;border:0;text-align:center}.menu-toggle .mobile-menu{padding-left:3px}.menu-toggle .gp-icon+.mobile-menu{padding-left:9px}@media (max-width:768px){.inside-header>:not(:last-child):not(.main-navigation){margin-bottom:20px}.site-header{text-align:center}.header-widget{float:none;max-width:100%;text-align:center}.content-area{float:none;width:100%;left:0;right:0}.site-main{margin-left:0!important;margin-right:0!important}.entry-meta{font-size:inherit}.entry-meta a{line-height:1.8em}}body{background-color:#f4f4f4;color:#000}a{color:#1e73be}body .grid-container{max-width:1100px}.generate-back-to-top{font-size:20px;border-radius:3px;position:fixed;bottom:30px;right:30px;line-height:40px;width:40px;text-align:center;z-index:10}body,button,input{font-family:"Lora",serif;font-size:18px}body{line-height:1.5}.main-title{font-weight:100;font-size:45px}.main-navigation .main-nav ul ul li a{font-size:14px}input[type=submit]{text-transform:uppercase;font-size:15px}h1{font-weight:300;font-size:35px}h2{font-weight:300;font-size:27px}@media (max-width:768px){.main-title{font-size:30px}h1{font-size:30px}h2{font-size:25px}}.site-header{background-color:#fff;color:#3a3a3a}.site-header a{color:#3a3a3a}.main-title a{color:#000}.main-navigation,.main-navigation ul ul{background-color:#f9f9f9}.main-navigation .main-nav ul li a,.menu-toggle{color:#000}.main-navigation ul ul{background-color:#fff}.main-navigation .main-nav ul ul li a{color:#000}.one-container .container{background-color:#fff}.entry-meta{color:#000}.entry-meta a{color:#333}input[type=search]{color:#000;background-color:#fff;border-color:#000}button,input[type=submit]{color:#000;background-color:#fff}a.generate-back-to-top{background-color:rgba(255,255,255,.75);color:#000}.inside-header{padding:60px}.one-container .site-content{padding:60px}@media (max-width:768px){.one-container .site-content{padding:40px}}@media (max-width:768px){.main-navigation .menu-toggle{display:block}.main-navigation ul{display:none}}.main-navigation{border-top:1px solid rgba(0,0,0,.1);border-bottom:1px solid rgba(0,0,0,.1)}.entry-header,.entry-meta{text-align:center}.entry-content{max-width:800px;margin-left:auto;margin-right:auto}.entry-content{margin-top:3em}div.entry-meta>span{text-transform:uppercase;font-size:85%}button,input[type=submit]{border-width:1px;border-style:solid;border-color:inherit}.one-container .site-main>article:not(:last-child):after{content:"";border-bottom:1px solid rgba(0,0,0,.3);display:block;max-width:400px;margin:0 auto 60px}.one-container .inside-article{padding:0 0 60px}.generate-back-to-top{border-width:1px;border-style:solid}@media (min-width:769px){.main-navigation .menu>.menu-item>a:after{content:"";position:absolute;right:0;left:50%;bottom:15px;-webkit-transform:translateX(-50%);transform:translateX(-50%);display:block;width:0;height:1px;background-color:currentColor}}</style><link rel="preload" data-asynced="1" data-optimized="2" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://qing.su/wp-content/litespeed/css/690d9b47ea6dc0c5e5dfa2d1d160038b.css?ver=fbc43" /><script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script> <link rel="profile" href="https://gmpg.org/xfn/11"><title>使用Traffic Server实现高性能反向代理 | 香菇肥牛的博客</title><meta name="description" content="Apache Traffic Server (ATS) 是高性能的开源双向代理、缓存、CDN系统。本文介绍了Traffic Server系统的搭建与配置，从而简单实现对一个任意网站的缓存与反向代理。" /><meta name="robots" content="max-image-preview:large" /><meta name="keywords" content="apache traffic server,traffic server,反向代理,缓存,搭建反代,如何反代网站,搭建cdn,ats,cdn,reverse proxy,反代,vps教程" /><link rel="canonical" href="traffic-server-reverse-proxy.html" /><meta property="og:locale" content="en_US" /><meta property="og:site_name" content="香菇肥牛的博客 | 主机教程，服务器教程，VPS教程，虚拟主机教程，Wordpress教程，服务器，测评" /><meta property="og:type" content="article" /><meta property="og:title" content="使用Traffic Server实现高性能反向代理 | 香菇肥牛的博客" /><meta property="og:description" content="Apache Traffic Server (ATS) 是高性能的开源双向代理、缓存、CDN系统。本文介绍了Traffic Server系统的搭建与配置，从而简单实现对一个任意网站的缓存与反向代理。" /><meta property="og:url" content="https://qing.su/article/traffic-server-reverse-proxy.html" /><meta property="article:published_time" content="2020-07-13T23:41:01+00:00" /><meta property="article:modified_time" content="2020-07-16T20:23:33+00:00" /><meta name="twitter:card" content="summary" /><meta name="twitter:domain" content="qing.su" /><meta name="twitter:title" content="使用Traffic Server实现高性能反向代理 | 香菇肥牛的博客" /><meta name="twitter:description" content="Apache Traffic Server (ATS) 是高性能的开源双向代理、缓存、CDN系统。本文介绍了Traffic Server系统的搭建与配置，从而简单实现对一个任意网站的缓存与反向代理。" /> <script type="application/ld+json" class="aioseo-schema">{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebSite","@id":"https:\/\/qing.su\/#website","url":"https:\/\/qing.su\/","name":"\u9999\u83c7\u80a5\u725b\u7684\u535a\u5ba2","description":"\u4e3b\u673a\u6559\u7a0b\uff0c\u670d\u52a1\u5668\u6559\u7a0b\uff0cVPS\u6559\u7a0b\uff0c\u865a\u62df\u4e3b\u673a\u6559\u7a0b\uff0cWordpress\u6559\u7a0b\uff0c\u670d\u52a1\u5668\uff0c\u6d4b\u8bc4","inLanguage":"en-US","publisher":{"@id":"https:\/\/qing.su\/#organization"}},{"@type":"Organization","@id":"https:\/\/qing.su\/#organization","name":"\u9999\u83c7\u80a5\u725b\u7684\u535a\u5ba2","url":"https:\/\/qing.su\/"},{"@type":"BreadcrumbList","@id":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html#breadcrumblist","itemListElement":[{"@type":"ListItem","@id":"https:\/\/qing.su\/#listItem","position":1,"item":{"@type":"WebPage","@id":"https:\/\/qing.su\/","name":"Home","description":"\u9999\u83c7\u80a5\u725b\u7684\u535a\u5ba2\uff0c\u4e13\u6ce8\u4e8e\u53d1\u5e03\u5404\u7c7b\u7cbe\u54c1\u539f\u521b\u4e3b\u673a\u6559\u7a0b\uff0c\u670d\u52a1\u5668\u6559\u7a0b\uff0cVPS\u6559\u7a0b\uff0c\u865a\u62df\u4e3b\u673a\u6559\u7a0b\uff0cWordPress\u6559\u7a0b\uff0c\u670d\u52a1\u5668\u4e0e\u6d4b\u8bc4\u4fe1\u606f\uff0c\u4e3b\u673a\u8d44\u8baf\uff0c\u4ee5\u53ca\u5404\u7c7b\u7f51\u7ad9\u6559\u7a0b\u3002","url":"https:\/\/qing.su\/"}}]},{"@type":"Person","@id":"https:\/\/qing.su\/article\/author\/shc#author","url":"https:\/\/qing.su\/article\/author\/shc","name":"\u9999\u83c7\u80a5\u725b","image":{"@type":"ImageObject","@id":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html#authorImage","url":"https:\/\/qing.su\/wp-content\/litespeed\/avatar\/e5c8a13240ecfe22479ad980252cfb2e.jpg","width":96,"height":96,"caption":"\u9999\u83c7\u80a5\u725b"}},{"@type":"WebPage","@id":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html#webpage","url":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html","name":"\u4f7f\u7528Traffic Server\u5b9e\u73b0\u9ad8\u6027\u80fd\u53cd\u5411\u4ee3\u7406 | \u9999\u83c7\u80a5\u725b\u7684\u535a\u5ba2","description":"Apache Traffic Server (ATS) \u662f\u9ad8\u6027\u80fd\u7684\u5f00\u6e90\u53cc\u5411\u4ee3\u7406\u3001\u7f13\u5b58\u3001CDN\u7cfb\u7edf\u3002\u672c\u6587\u4ecb\u7ecd\u4e86Traffic Server\u7cfb\u7edf\u7684\u642d\u5efa\u4e0e\u914d\u7f6e\uff0c\u4ece\u800c\u7b80\u5355\u5b9e\u73b0\u5bf9\u4e00\u4e2a\u4efb\u610f\u7f51\u7ad9\u7684\u7f13\u5b58\u4e0e\u53cd\u5411\u4ee3\u7406\u3002","inLanguage":"en-US","isPartOf":{"@id":"https:\/\/qing.su\/#website"},"breadcrumb":{"@id":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html#breadcrumblist"},"author":"https:\/\/qing.su\/article\/author\/shc#author","creator":"https:\/\/qing.su\/article\/author\/shc#author","image":{"@type":"ImageObject","@id":"https:\/\/qing.su\/#mainImage","url":"https:\/\/qing.su\/wp-content\/uploads\/2020\/07\/ats-e1594683429664.png","width":300,"height":167},"primaryImageOfPage":{"@id":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html#mainImage"},"datePublished":"2020-07-13T23:41:01-05:00","dateModified":"2020-07-16T20:23:33-05:00"},{"@type":"Article","@id":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html#article","name":"\u4f7f\u7528Traffic Server\u5b9e\u73b0\u9ad8\u6027\u80fd\u53cd\u5411\u4ee3\u7406 | \u9999\u83c7\u80a5\u725b\u7684\u535a\u5ba2","description":"Apache Traffic Server (ATS) \u662f\u9ad8\u6027\u80fd\u7684\u5f00\u6e90\u53cc\u5411\u4ee3\u7406\u3001\u7f13\u5b58\u3001CDN\u7cfb\u7edf\u3002\u672c\u6587\u4ecb\u7ecd\u4e86Traffic Server\u7cfb\u7edf\u7684\u642d\u5efa\u4e0e\u914d\u7f6e\uff0c\u4ece\u800c\u7b80\u5355\u5b9e\u73b0\u5bf9\u4e00\u4e2a\u4efb\u610f\u7f51\u7ad9\u7684\u7f13\u5b58\u4e0e\u53cd\u5411\u4ee3\u7406\u3002","inLanguage":"en-US","headline":"\u4f7f\u7528Traffic Server\u5b9e\u73b0\u9ad8\u6027\u80fd\u53cd\u5411\u4ee3\u7406","author":{"@id":"https:\/\/qing.su\/article\/author\/shc#author"},"publisher":{"@id":"https:\/\/qing.su\/#organization"},"datePublished":"2020-07-13T23:41:01-05:00","dateModified":"2020-07-16T20:23:33-05:00","commentCount":11,"articleSection":"VPS\u6559\u7a0b, Apache Traffic Server, ATS, CDN, Reverse Proxy, Traffic Server, \u53cd\u4ee3, \u53cd\u5411\u4ee3\u7406, \u7f13\u5b58","mainEntityOfPage":{"@id":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html#webpage"},"isPartOf":{"@id":"https:\/\/qing.su\/article\/traffic-server-reverse-proxy.html#webpage"},"image":{"@type":"ImageObject","@id":"https:\/\/qing.su\/#articleImage","url":"https:\/\/qing.su\/wp-content\/uploads\/2020\/07\/ats-e1594683429664.png","width":300,"height":167}}]}</script> <link rel='dns-prefetch' href='https://fonts.googleapis.com/' /><link rel='dns-prefetch' href='https://s.w.org/' /><link href='https://fonts.gstatic.com' crossorigin rel='preconnect' /><link rel="alternate" type="application/rss+xml" title="香菇肥牛的博客 &raquo; Feed" href="https://qing.su/feed" /><link rel="alternate" type="application/rss+xml" title="香菇肥牛的博客 &raquo; Comments Feed" href="https://qing.su/comments/feed" /><link rel="alternate" type="application/rss+xml" title="香菇肥牛的博客 &raquo; 使用Traffic Server实现高性能反向代理 Comments Feed" href="https://qing.su/article/traffic-server-reverse-proxy.html/feed" /><style id='generate-style-inline-css'>.no-featured-image-padding .featured-image {margin-left:-60px;margin-right:-60px;}.post-image-above-header .no-featured-image-padding .inside-article .featured-image {margin-top:-60px;}@media (max-width:768px){.no-featured-image-padding .featured-image {margin-left:-40px;margin-right:-40px;}.post-image-above-header .no-featured-image-padding .inside-article .featured-image {margin-top:-40px;}}
body{background-color:#f4f4f4;color:#000000;}a{color:#1e73be;}a:hover, a:focus, a:active{color:#000000;}body .grid-container{max-width:1100px;}.wp-block-group__inner-container{max-width:1100px;margin-left:auto;margin-right:auto;}.site-header .header-image{width:350px;}.generate-back-to-top{font-size:20px;border-radius:3px;position:fixed;bottom:30px;right:30px;line-height:40px;width:40px;text-align:center;z-index:10;transition:opacity 300ms ease-in-out;}body, button, input, select, textarea{font-family:"Lora", serif;font-size:18px;}body{line-height:1.5;}.entry-content > [class*="wp-block-"]:not(:last-child){margin-bottom:1.5em;}.main-title{font-weight:100;font-size:45px;}.main-navigation .main-nav ul ul li a{font-size:14px;}.widget-title{text-transform:uppercase;}.sidebar .widget, .footer-widgets .widget{font-size:17px;}button:not(.menu-toggle),html input[type="button"],input[type="reset"],input[type="submit"],.button,.wp-block-button .wp-block-button__link{text-transform:uppercase;font-size:15px;}h1{font-weight:300;font-size:35px;}h2{font-weight:300;font-size:27px;}h3{font-size:24px;}h4{text-transform:uppercase;font-size:inherit;}h5{text-transform:uppercase;font-size:inherit;}.site-info{text-transform:uppercase;font-size:14px;}@media (max-width:768px){.main-title{font-size:30px;}h1{font-size:30px;}h2{font-size:25px;}}.top-bar{background-color:#636363;color:#ffffff;}.top-bar a{color:#ffffff;}.top-bar a:hover{color:#303030;}.site-header{background-color:#ffffff;color:#3a3a3a;}.site-header a{color:#3a3a3a;}.main-title a,.main-title a:hover{color:#000000;}.site-description{color:#757575;}.main-navigation,.main-navigation ul ul{background-color:#f9f9f9;}.main-navigation .main-nav ul li a,.menu-toggle, .main-navigation .menu-bar-items{color:#000000;}.main-navigation .main-nav ul li:hover > a,.main-navigation .main-nav ul li:focus > a, .main-navigation .main-nav ul li.sfHover > a, .main-navigation .menu-bar-item:hover > a, .main-navigation .menu-bar-item.sfHover > a{color:#1e73be;}button.menu-toggle:hover,button.menu-toggle:focus,.main-navigation .mobile-bar-items a,.main-navigation .mobile-bar-items a:hover,.main-navigation .mobile-bar-items a:focus{color:#000000;}.main-navigation .main-nav ul li[class*="current-menu-"] > a{color:#000000;background-color:#f9f9f9;}.main-navigation .main-nav ul li[class*="current-menu-"] > a:hover,.main-navigation .main-nav ul li[class*="current-menu-"].sfHover > a{color:#000000;background-color:#f9f9f9;}.navigation-search input[type="search"],.navigation-search input[type="search"]:active, .navigation-search input[type="search"]:focus, .main-navigation .main-nav ul li.search-item.active > a, .main-navigation .menu-bar-items .search-item.active > a{color:#1e73be;}.main-navigation ul ul{background-color:#ffffff;}.main-navigation .main-nav ul ul li a{color:#000000;}.main-navigation .main-nav ul ul li:hover > a,.main-navigation .main-nav ul ul li:focus > a,.main-navigation .main-nav ul ul li.sfHover > a{color:#1e73be;background-color:#fafafa;}.main-navigation .main-nav ul ul li[class*="current-menu-"] > a{color:#1e73be;background-color:#ffffff;}.main-navigation .main-nav ul ul li[class*="current-menu-"] > a:hover,.main-navigation .main-nav ul ul li[class*="current-menu-"].sfHover > a{color:#1e73be;background-color:#ffffff;}.separate-containers .inside-article, .separate-containers .comments-area, .separate-containers .page-header, .one-container .container, .separate-containers .paging-navigation, .inside-page-header{background-color:#ffffff;}.entry-title a{color:#000000;}.entry-title a:hover{color:#1e73be;}.entry-meta{color:#000000;}.entry-meta a{color:#333333;}.entry-meta a:hover{color:#1e73be;}.sidebar .widget{background-color:#f9f9f9;}.sidebar .widget .widget-title{color:#000000;}.footer-widgets{background-color:#f9f9f9;}.footer-widgets .widget-title{color:#000000;}.site-info{color:#000000;background-color:#ffffff;}.site-info a{color:#000000;}.site-info a:hover{color:#606060;}.footer-bar .widget_nav_menu .current-menu-item a{color:#606060;}input[type="text"],input[type="email"],input[type="url"],input[type="password"],input[type="search"],input[type="tel"],input[type="number"],textarea,select{color:#000000;background-color:#ffffff;border-color:#000000;}input[type="text"]:focus,input[type="email"]:focus,input[type="url"]:focus,input[type="password"]:focus,input[type="search"]:focus,input[type="tel"]:focus,input[type="number"]:focus,textarea:focus,select:focus{color:#666666;background-color:#ffffff;border-color:#bfbfbf;}button,html input[type="button"],input[type="reset"],input[type="submit"],a.button,a.wp-block-button__link:not(.has-background){color:#000000;background-color:#ffffff;}button:hover,html input[type="button"]:hover,input[type="reset"]:hover,input[type="submit"]:hover,a.button:hover,button:focus,html input[type="button"]:focus,input[type="reset"]:focus,input[type="submit"]:focus,a.button:focus,a.wp-block-button__link:not(.has-background):active,a.wp-block-button__link:not(.has-background):focus,a.wp-block-button__link:not(.has-background):hover{color:#ffffff;background-color:#1e73be;}a.generate-back-to-top{background-color:rgba(255,255,255,0.75);color:#000000;}a.generate-back-to-top:hover,a.generate-back-to-top:focus{background-color:#ffffff;color:#1e73be;}@media (max-width: 768px){.main-navigation .menu-bar-item:hover > a, .main-navigation .menu-bar-item.sfHover > a{background:none;color:#000000;}}.inside-top-bar{padding:10px;}.inside-header{padding:60px;}.separate-containers .inside-article, .separate-containers .comments-area, .separate-containers .page-header, .separate-containers .paging-navigation, .one-container .site-content, .inside-page-header{padding:60px;}.site-main .wp-block-group__inner-container{padding:60px;}.entry-content .alignwide, body:not(.no-sidebar) .entry-content .alignfull{margin-left:-60px;width:calc(100% + 120px);max-width:calc(100% + 120px);}.one-container.right-sidebar .site-main,.one-container.both-right .site-main{margin-right:60px;}.one-container.left-sidebar .site-main,.one-container.both-left .site-main{margin-left:60px;}.one-container.both-sidebars .site-main{margin:0px 60px 0px 60px;}.rtl .menu-item-has-children .dropdown-menu-toggle{padding-left:20px;}.rtl .main-navigation .main-nav ul li.menu-item-has-children > a{padding-right:20px;}.widget-area .widget{padding:30px;}.footer-widgets{padding:60px;}.site-info{padding:20px;}@media (max-width:768px){.separate-containers .inside-article, .separate-containers .comments-area, .separate-containers .page-header, .separate-containers .paging-navigation, .one-container .site-content, .inside-page-header{padding:40px;}.site-main .wp-block-group__inner-container{padding:40px;}.site-info{padding-right:10px;padding-left:10px;}.entry-content .alignwide, body:not(.no-sidebar) .entry-content .alignfull{margin-left:-40px;width:calc(100% + 80px);max-width:calc(100% + 80px);}}/* End cached CSS */@media (max-width: 768px){.main-navigation .menu-toggle,.main-navigation .mobile-bar-items,.sidebar-nav-mobile:not(#sticky-placeholder){display:block;}.main-navigation ul,.gen-sidebar-nav{display:none;}[class*="nav-float-"] .site-header .inside-header > *{float:none;clear:both;}}
.main-navigation .main-nav ul li a,.menu-toggle,.main-navigation .mobile-bar-items a{transition: line-height 300ms ease}.main-navigation.toggled .main-nav > ul{background-color: #f9f9f9}</style><style id='quads-styles-inline-css'>.quads-location ins.adsbygoogle {
        background: transparent !important;
    }
    
    .quads-ad-label { font-size: 12px; text-align: center; color: #333;}</style> <script src='https://qing.su/wp-includes/js/jquery/jquery.min.js' id='jquery-core-js'></script> <script data-optimized="1" src='https://qing.su/wp-content/litespeed/js/82756976dbccda4f5c38f9978df0f10d.js' id='jquery-migrate-js'></script> <link rel="https://api.w.org/" href="https://qing.su/wp-json/" /><link rel="alternate" type="application/json" href="https://qing.su/wp-json/wp/v2/posts/2024" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://qing.su/xmlrpc.php?rsd" /><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://qing.su/wp-includes/wlwmanifest.xml" /><meta name="generator" content="WordPress 5.8.1" /><link rel='shortlink' href='https://qing.su/?p=2024' /><link rel="alternate" type="application/json+oembed" href="https://qing.su/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fqing.su%2Farticle%2Ftraffic-server-reverse-proxy.html" /><link rel="alternate" type="text/xml+oembed" href="https://qing.su/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fqing.su%2Farticle%2Ftraffic-server-reverse-proxy.html&#038;format=xml" /> <script type='text/javascript'>document.cookie = 'quads_browser_width='+screen.width;</script><link rel="pingback" href="https://qing.su/xmlrpc.php"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="https://qing.su/wp-content/uploads/2020/07/cropped-favicon-1-32x32.png" sizes="32x32" /><link rel="icon" href="https://qing.su/wp-content/uploads/2020/07/cropped-favicon-1-192x192.png" sizes="192x192" /><link rel="apple-touch-icon" href="https://qing.su/wp-content/uploads/2020/07/cropped-favicon-1-180x180.png" /><meta name="msapplication-TileImage" content="https://qing.su/wp-content/uploads/2020/07/cropped-favicon-1-270x270.png" /><style id="wp-custom-css">/* GeneratePress Site CSS */ .main-navigation,
.footer-widgets {
	border-top: 1px solid rgba(0,0,0,0.1);
	border-bottom: 1px solid rgba(0,0,0,0.1);
}

.entry-header,
.entry-meta {
	text-align: center;
}

.sidebar .widget {
	border: 1px solid rgba(0,0,0,0.1);
}

.entry-content,
.entry-summary,
#comments {
	max-width: 800px;
	margin-left: auto;
	margin-right: auto;
}

.post-image,
.entry-content {
	margin-top: 3em;
}

.post-image:hover {
	opacity: 0.95;
}

footer.entry-meta > span {
	display: inline-block;
	margin: 0 10px;
	text-transform: uppercase;
	font-size: 85%;
}

.post-navigation {
	text-transform: uppercase;
	font-size: 85%;
}

div.entry-meta > span {
	text-transform: uppercase;
	font-size: 85%;
}

button, html input[type="button"], input[type="reset"], input[type="submit"], a.button, a.button:visited {
	border-width: 1px;
	border-style: solid;
	border-color: inherit;
}

.read-more-container,
#comments {
	text-align: center;
}

#comments .comment {
	text-align: left;
}

.one-container .site-main > article:not(:last-child):after {
    content: "";
    border-bottom: 1px solid rgba(0,0,0,0.3);
    display: block;
    max-width: 400px;
    margin: 0 auto 60px;
}

.one-container .inside-article {
    padding: 0 0 60px;
}

.nf-form-cont {
    text-align: center;
}

.nf-form-fields-required {
    margin-bottom: 30px;
}

.main-navigation.toggled .main-nav li {
    text-align: center !important;
}

.generate-back-to-top {
    border-width: 1px;
    border-style: solid;
}

.post-image-above-header .inside-article .post-image, 
.post-image-above-header .inside-article .featured-image {
    margin-bottom: 60px;
}

.widget-title:after {
    content: "";
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-color: inherit;
    display: block;
    width: 30px;
    padding-top: 10px;
}

.nf-field-label {
    margin: 0 auto;
}

.sticky-enabled .main-navigation.is_stuck {
    box-shadow: 0 0 0;
}

@media (max-width: 768px) {
	.main-navigation.toggled .main-nav li.social-icon {
    	display: inline-block !important;
	}
}

@media (min-width: 769px) {
    .main-navigation .menu > .menu-item > a::after {
        content: "";
        position: absolute;
        right: 0;
        left: 50%;
        bottom: 15px;
        -webkit-transform: translateX(-50%);
        transform: translateX(-50%);

        display: block;
        width: 0;
        height: 1px;

        background-color: currentColor;
        transition: 0.3s width ease;
    }
    .main-navigation .menu > .menu-item.current-menu-item > a::after,
    .main-navigation .menu > .menu-item > a:hover::after,
		.main-navigation .menu > .menu-item.sfHover > a::after {
        width: 50%;
    }
} /* End GeneratePress Site CSS */</style><link data-asynced="1" as="style" onload="this.onload=null;this.rel='stylesheet'"  rel="preload" type="text/css" href="https://cdn.jsdelivr.net/gh/Har-Kuun/sshsharer@1.0/sshsharer-player.css" /><noscript><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Har-Kuun/sshsharer@1.0/sshsharer-player.css" /></noscript></head><body class="post-template-default single single-post postid-2024 single-format-standard wp-embed-responsive post-image-above-header post-image-aligned-center sticky-menu-no-transition sticky-enabled both-sticky-menu no-sidebar nav-below-header one-container contained-header active-footer-widgets-1 nav-aligned-center header-aligned-center dropdown-hover featured-image-active" itemtype="https://schema.org/Blog" itemscope>
<a class="screen-reader-text skip-link" href="traffic-server-reverse-proxy.html#content" title="Skip to content">Skip to content</a><header id="masthead" class="site-header grid-container grid-parent" itemtype="https://schema.org/WPHeader" itemscope><div class="inside-header grid-container grid-parent"><div class="header-widget"><aside id="search-4" class="widget inner-padding widget_search"><form method="get" class="search-form" action="https://qing.su/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:">
</label>
<input type="submit" class="search-submit" value="Search"></form></aside></div><div class="site-branding"><p class="main-title" itemprop="headline">
<a href="https://qing.su/" rel="home">
香菇肥牛的博客
</a></p></div></div></header><nav id="site-navigation" class="auto-hide-sticky main-navigation grid-container grid-parent sub-menu-right" itemtype="https://schema.org/SiteNavigationElement" itemscope><div class="inside-navigation grid-container grid-parent">
<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">
<span class="gp-icon icon-menu-bars"><svg viewBox="0 0 512 512" aria-hidden="true" role="img" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
<path d="M0 96c0-13.255 10.745-24 24-24h464c13.255 0 24 10.745 24 24s-10.745 24-24 24H24c-13.255 0-24-10.745-24-24zm0 160c0-13.255 10.745-24 24-24h464c13.255 0 24 10.745 24 24s-10.745 24-24 24H24c-13.255 0-24-10.745-24-24zm0 160c0-13.255 10.745-24 24-24h464c13.255 0 24 10.745 24 24s-10.745 24-24 24H24c-13.255 0-24-10.745-24-24z" />
</svg><svg viewBox="0 0 512 512" aria-hidden="true" role="img" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
<path d="M71.029 71.029c9.373-9.372 24.569-9.372 33.942 0L256 222.059l151.029-151.03c9.373-9.372 24.569-9.372 33.942 0 9.372 9.373 9.372 24.569 0 33.942L289.941 256l151.03 151.029c9.372 9.373 9.372 24.569 0 33.942-9.373 9.372-24.569 9.372-33.942 0L256 289.941l-151.029 151.03c-9.373 9.372-24.569 9.372-33.942 0-9.372-9.373-9.372-24.569 0-33.942L222.059 256 71.029 104.971c-9.372-9.373-9.372-24.569 0-33.942z" />
</svg></span><span class="mobile-menu">Menu</span>				</button><div id="primary-menu" class="main-nav"><ul id="menu-primary-menu" class=" menu sf-menu"><li id="menu-item-1682" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1682"><a href="https://qing.su">首页</a></li><li id="menu-item-1683" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1683"><a href="traffic-server-reverse-proxy.html#">Linux新手教程<span role="presentation" class="dropdown-menu-toggle"><span class="gp-icon icon-arrow"><svg viewBox="0 0 330 512" aria-hidden="true" role="img" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
<path d="M305.913 197.085c0 2.266-1.133 4.815-2.833 6.514L171.087 335.593c-1.7 1.7-4.249 2.832-6.515 2.832s-4.815-1.133-6.515-2.832L26.064 203.599c-1.7-1.7-2.832-4.248-2.832-6.514s1.132-4.816 2.832-6.515l14.162-14.163c1.7-1.699 3.966-2.832 6.515-2.832 2.266 0 4.815 1.133 6.515 2.832l111.316 111.317 111.316-111.317c1.7-1.699 4.249-2.832 6.515-2.832s4.815 1.133 6.515 2.832l14.162 14.163c1.7 1.7 2.833 4.249 2.833 6.515z" fill-rule="nonzero"/>
</svg></span></span></a><ul class="sub-menu"><li id="menu-item-1684" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1684"><a href="https://qing.su/how-to-set-hostname">[新手教程]为Linux服务器设置主机名</a></li><li id="menu-item-1685" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1685"><a href="https://qing.su/change-ssh-port">[新手教程]Linux更改SSH登录端口</a></li><li id="menu-item-1686" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1686"><a href="https://qing.su/linux-enable-ssh-root-login">[新手教程]Linux设置允许root账户登录SSH</a></li></ul></li><li id="menu-item-1688" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1688"><a href="https://qing.su/category/%e7%8b%ac%e7%ab%8b%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%95%99%e7%a8%8b">VPS/独服教程<span role="presentation" class="dropdown-menu-toggle"><span class="gp-icon icon-arrow"><svg viewBox="0 0 330 512" aria-hidden="true" role="img" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
<path d="M305.913 197.085c0 2.266-1.133 4.815-2.833 6.514L171.087 335.593c-1.7 1.7-4.249 2.832-6.515 2.832s-4.815-1.133-6.515-2.832L26.064 203.599c-1.7-1.7-2.832-4.248-2.832-6.514s1.132-4.816 2.832-6.515l14.162-14.163c1.7-1.699 3.966-2.832 6.515-2.832 2.266 0 4.815 1.133 6.515 2.832l111.316 111.317 111.316-111.317c1.7-1.699 4.249-2.832 6.515-2.832s4.815 1.133 6.515 2.832l14.162 14.163c1.7 1.7 2.833 4.249 2.833 6.515z" fill-rule="nonzero"/>
</svg></span></span></a><ul class="sub-menu"><li id="menu-item-1715" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1715"><a href="https://qing.su/webservers-tutorial">Web服务器教程</a></li><li id="menu-item-1690" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1690"><a href="https://qing.su/tag/mxtutorial">邮件服务器教程</a></li><li id="menu-item-1691" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1691"><a href="https://qing.su/tag/controlpanel">主机控制面板教程</a></li><li id="menu-item-1991" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1991"><a href="https://qing.su/tag/%e6%8c%96%e7%9f%bf">挖矿教程</a></li></ul></li><li id="menu-item-1752" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1752"><a href="https://qing.su/website-script">网站程序教程</a></li><li id="menu-item-1758" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1758"><a href="https://qing.su/domains">域名出售</a></li><li id="menu-item-2089" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-2089"><a href="https://github.com/Har-Kuun/">个人开源项目<span role="presentation" class="dropdown-menu-toggle"><span class="gp-icon icon-arrow"><svg viewBox="0 0 330 512" aria-hidden="true" role="img" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
<path d="M305.913 197.085c0 2.266-1.133 4.815-2.833 6.514L171.087 335.593c-1.7 1.7-4.249 2.832-6.515 2.832s-4.815-1.133-6.515-2.832L26.064 203.599c-1.7-1.7-2.832-4.248-2.832-6.514s1.132-4.816 2.832-6.515l14.162-14.163c1.7-1.699 3.966-2.832 6.515-2.832 2.266 0 4.815 1.133 6.515 2.832l111.316 111.317 111.316-111.317c1.7-1.699 4.249-2.832 6.515-2.832s4.815 1.133 6.515 2.832l14.162 14.163c1.7 1.7 2.833 4.249 2.833 6.515z" fill-rule="nonzero"/>
</svg></span></span></a><ul class="sub-menu"><li id="menu-item-2090" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-2090"><a href="https://qing.su/article/oneclick-cdn.html">一键搭建高性能的CDN节点服务器</a></li><li id="menu-item-2109" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-2109"><a href="https://qing.su/article/oneclick-desktop.html">一键安装可以使用浏览器访问的Linux桌面环境</a></li><li id="menu-item-2091" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-2091"><a href="https://qing.su/article/namebot.html">用C语言写的全自动国别域名扫描器</a></li></ul></li><li id="menu-item-1835" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1835"><a href="traffic-server-reverse-proxy.html#">免费服务<span role="presentation" class="dropdown-menu-toggle"><span class="gp-icon icon-arrow"><svg viewBox="0 0 330 512" aria-hidden="true" role="img" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
<path d="M305.913 197.085c0 2.266-1.133 4.815-2.833 6.514L171.087 335.593c-1.7 1.7-4.249 2.832-6.515 2.832s-4.815-1.133-6.515-2.832L26.064 203.599c-1.7-1.7-2.832-4.248-2.832-6.514s1.132-4.816 2.832-6.515l14.162-14.163c1.7-1.699 3.966-2.832 6.515-2.832 2.266 0 4.815 1.133 6.515 2.832l111.316 111.317 111.316-111.317c1.7-1.699 4.249-2.832 6.515-2.832s4.815 1.133 6.515 2.832l14.162 14.163c1.7 1.7 2.833 4.249 2.833 6.515z" fill-rule="nonzero"/>
</svg></span></span></a><ul class="sub-menu"><li id="menu-item-1836" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1836"><a href="https://qing.su/shorturl">免费短网址服务器</a></li><li id="menu-item-1814" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1814"><a href="https://qing.su/game">在线玩游戏</a></li></ul></li><li id="menu-item-1687" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1687"><a href="https://qing.su/aboutme">关于香菇肥牛</a></li></ul></div></div></nav><div id="page" class="site grid-container container hfeed grid-parent"><div id="content" class="site-content"><div id="primary" class="content-area grid-parent mobile-grid-100 grid-100 tablet-grid-100"><main id="main" class="site-main"><article id="post-2024" class="post-2024 post type-post status-publish format-standard has-post-thumbnail hentry category-tutorial tag-apache-traffic-server tag-ats tag-cdn tag-reverse-proxy tag-traffic-server tag-308 tag-309 tag-253 no-featured-image-padding" itemtype="https://schema.org/CreativeWork" itemscope><div class="inside-article"><header class="entry-header"><h1 class="entry-title" itemprop="headline">使用Traffic Server实现高性能反向代理</h1><div class="entry-meta">
<span class="posted-on"><time class="updated" datetime="2020-07-16T15:23:33-05:00" itemprop="dateModified">07/16/2020</time><time class="entry-date published" datetime="2020-07-13T18:41:01-05:00" itemprop="datePublished">07/13/2020</time></span> <span class="byline">by <span class="author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope><a class="url fn n" href="https://qing.su/article/author/shc" title="View all posts by 香菇肥牛" rel="author" itemprop="url"><span class="author-name" itemprop="name">香菇肥牛</span></a></span></span></div></header><div class="entry-content" itemprop="text"><div class="quads-location quads-ad1" id="quads-ad1" style="float:none;margin:0px;"> <script data-ad-client="ca-pub-0438043471702815" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> </div><p>Apache Traffic Server (亦称作Traffic Server, ATS, TS) 是一个高性能双向代理, 缓存, CDN服务器。今天，我来介绍如何用Traffic Server简单方便地配置反向代理与缓存服务器，实现对任意网站的反向代理。下一篇文章，我将介绍如何使用Traffic Server搭建一个高效的CDN系统。</p><div class="quads-location quads-ad1" id="quads-ad1" style="float:none;margin:0px;"> <script data-ad-client="ca-pub-0438043471702815" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> </div><p>本文作者为香菇肥牛，原文链接为<a href="traffic-server-reverse-proxy.html" target="_blank" rel="noopener noreferrer">https://qing.su/article/traffic-server-reverse-proxy.html</a>, 转载需注明原文链接。谢谢！</p><p>&nbsp;</p><h2>1, Apache Traffic Server简介</h2><p>Apache Traffic Server由Yahoo于2009年开源，经过现在已经成为了非常成熟的代理/缓存/CDN系统。早在2009年，雅虎使用Traffic Server就可以用150台服务器实现每天400 TB的高速流量分发。经过多年的发展，ATS已经用于非常多的商业CDN分发与大型网络。Traffic Server与Nginx, Varnish三者几乎称霸了世界上所有CDN运营商，而Traffic Server又是这三者之中使用量最大的。与Nginx相比，Traffic Server拥有同样优异的性能显著的更多的功能，更丰富的接口，以及高度自定义的配置。与Varnish相比，Traffic Server对于高并发高负载的处理更为出色。</p><p>使用Traffic Server的CDN/大型网络有Apple, Comcast, Yahoo, Akamai, 以及国内的又拍云等。Traffic Server, Nginx, Varnish各自的优缺点可以查看这个讨论：<a href="https://www.bizety.com/2016/01/07/nginx-vs-varnish-vs-apache-traffic-server-high-level-comparison/" target="_blank" rel="nofollow noopener noreferrer">https://www.bizety.com/2016/01/07/nginx-vs-varnish-vs-apache-traffic-server-high-level-comparison/</a></p><p>&nbsp;</p><h2>2, 安装Traffic Server</h2><p>安装Traffic Server之前，请确保您的VPS/独服上没有安装其他的Web服务器程序，否则会发生冲突。本文的操作环境为Ubuntu 20.04 LTS 64 bit.  其他操作系统的安装与配置方法类似。Traffic Server将使用编译方式安装，当前版本为8.0.8。若您使用系统自带的包管理器安装，则版本可能较老，请注意设置上可能会有所差异。</p><p>请前往<a href="https://www.apache.org/dyn/closer.cgi/trafficserver" target="_blank" rel="nofollow noopener noreferrer">https://www.apache.org/dyn/closer.cgi/trafficserver</a>下载最新版本的安装包。</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap"><span style="color: #c20cb9; font-weight: bold;">wget</span> https:<span style="color: #000000; font-weight: bold;">//</span>mirrors.ocf.berkeley.edu<span style="color: #000000; font-weight: bold;">/</span>apache<span style="color: #000000; font-weight: bold;">/</span>trafficserver<span style="color: #000000; font-weight: bold;">/</span>trafficserver-8.0.8.tar.bz2<br />
<span style="color: #c20cb9; font-weight: bold;">tar</span> xjf trafficserver-8.0.8.tar.bz2</div></td></tr></tbody></table></div><p>安装必要的依赖环境与编译器：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">apt <span style="color: #c20cb9; font-weight: bold;">install</span> <span style="color: #c20cb9; font-weight: bold;">automake</span> libtool pkg-config libmodule-install-perl <span style="color: #c20cb9; font-weight: bold;">gcc</span> <span style="color: #c20cb9; font-weight: bold;">g++</span> libssl-dev tcl-dev libpcre3-dev libcap-dev libhwloc-dev libncurses5-dev libcurl4-openssl-dev <span style="color: #c20cb9; font-weight: bold;">flex</span> autotools-dev <span style="color: #c20cb9; font-weight: bold;">bison</span> debhelper dh-apparmor <span style="color: #c20cb9; font-weight: bold;">gettext</span> intltool-debian libbison-dev libexpat1-dev libfl-dev libsigsegv2 libsqlite3-dev <span style="color: #c20cb9; font-weight: bold;">m4</span> po-debconf tcl8.6-dev zlib1g-dev</div></td></tr></tbody></table></div><p>编译安装Traffic Server:</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap"><span style="color: #7a0874; font-weight: bold;">cd</span> trafficserver-8.0.8<br />
.<span style="color: #000000; font-weight: bold;">/</span>configure <span style="color: #660033;">--enable-experimental-plugins</span><br />
<span style="color: #c20cb9; font-weight: bold;">make</span><br />
<span style="color: #c20cb9; font-weight: bold;">make</span> <span style="color: #c20cb9; font-weight: bold;">install</span></div></td></tr></tbody></table></div><p>其中，&#8211;enable-experimental-plugins参数这里可以不加。</p><p>安装完毕后，为配置文件创建一个符号链接，便于管理：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap"><span style="color: #c20cb9; font-weight: bold;">ln</span> <span style="color: #660033;">-s</span> <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>local<span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>trafficserver <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>trafficserver</div></td></tr></tbody></table></div><p>执行完毕后，所有的Traffic Server配置文件都在/etc/trafficserver目录中。我们接下来需要配置这个目录中的多个文件。</p><p><a href="https://qing.su/wp-content/uploads/2020/07/configs.png"><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjUiIGhlaWdodD0iNDAwIiB2aWV3Qm94PSIwIDAgNzY1IDQwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==" loading="lazy" class="aligncenter size-full wp-image-2025" data-src="https://qing.su/wp-content/uploads/2020/07/configs.png" alt="" width="765" height="400" data-srcset="https://qing.su/wp-content/uploads/2020/07/configs.png 765w, https://qing.su/wp-content/uploads/2020/07/configs-300x157.png 300w" data-sizes="(max-width: 765px) 100vw, 765px" /><noscript><img loading="lazy" class="aligncenter size-full wp-image-2025" src="https://qing.su/wp-content/uploads/2020/07/configs.png" alt="" width="765" height="400" srcset="https://qing.su/wp-content/uploads/2020/07/configs.png 765w, https://qing.su/wp-content/uploads/2020/07/configs-300x157.png 300w" sizes="(max-width: 765px) 100vw, 765px" /></noscript></a></p><p>&nbsp;</p><h2>3, 配置URL映射规则</h2><p>为了实现反代，我们需要配置URL映射规则，这样Traffic Server就能按照我们的指令来进行替换。</p><p>下面我们将用proxy.qing.su和origin.qing.su这两个域名为例。假设源站域名为origin.qing.su, 源站在另一台服务器上。我们想用proxy.qing.su这个域名来反代源站origin.qing.su.</p><p>编辑文件 <em><strong>records.config</strong></em>, 找到下面这行：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">CONFIG proxy.config.http.server_ports STRING <span style="color: #000000;">8080</span> <span style="color: #000000;">8080</span>:ipv6</div></td></tr></tbody></table></div><p>将其修改为：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">CONFIG proxy.config.http.server_ports STRING <span style="color: #000000;">80</span> <span style="color: #000000;">443</span>:ssl</div></td></tr></tbody></table></div><p>如下图所示。</p><p><a href="https://qing.su/wp-content/uploads/2020/07/records1.png"><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDIiIGhlaWdodD0iMTUzIiB2aWV3Qm94PSIwIDAgODAyIDE1MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==" loading="lazy" class="aligncenter size-full wp-image-2026" data-src="https://qing.su/wp-content/uploads/2020/07/records1.png" alt="" width="802" height="153" data-srcset="https://qing.su/wp-content/uploads/2020/07/records1.png 802w, https://qing.su/wp-content/uploads/2020/07/records1-300x57.png 300w, https://qing.su/wp-content/uploads/2020/07/records1-768x147.png 768w" data-sizes="(max-width: 802px) 100vw, 802px" /><noscript><img loading="lazy" class="aligncenter size-full wp-image-2026" src="https://qing.su/wp-content/uploads/2020/07/records1.png" alt="" width="802" height="153" srcset="https://qing.su/wp-content/uploads/2020/07/records1.png 802w, https://qing.su/wp-content/uploads/2020/07/records1-300x57.png 300w, https://qing.su/wp-content/uploads/2020/07/records1-768x147.png 768w" sizes="(max-width: 802px) 100vw, 802px" /></noscript></a></p><p>再找到下面这行，将0改为1：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">CONFIG proxy.config.url_remap.pristine_host_hdr INT <span style="color: #000000;">0</span></div></td></tr></tbody></table></div><p>如下图所示。</p><p><a href="https://qing.su/wp-content/uploads/2020/07/records2.png"><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iMjgyIiB2aWV3Qm94PSIwIDAgODAwIDI4MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==" loading="lazy" class="aligncenter size-full wp-image-2027" data-src="https://qing.su/wp-content/uploads/2020/07/records2.png" alt="" width="800" height="282" data-srcset="https://qing.su/wp-content/uploads/2020/07/records2.png 800w, https://qing.su/wp-content/uploads/2020/07/records2-300x106.png 300w, https://qing.su/wp-content/uploads/2020/07/records2-768x271.png 768w" data-sizes="(max-width: 800px) 100vw, 800px" /><noscript><img loading="lazy" class="aligncenter size-full wp-image-2027" src="https://qing.su/wp-content/uploads/2020/07/records2.png" alt="" width="800" height="282" srcset="https://qing.su/wp-content/uploads/2020/07/records2.png 800w, https://qing.su/wp-content/uploads/2020/07/records2-300x106.png 300w, https://qing.su/wp-content/uploads/2020/07/records2-768x271.png 768w" sizes="(max-width: 800px) 100vw, 800px" /></noscript></a></p><p>然后编辑文件<em><strong>remap.config</strong></em>.  所有的反代/映射规则都写在这个文件中。在文件末尾添加下面的行：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">redirect http:<span style="color: #000000; font-weight: bold;">//</span>proxy.qing.su<span style="color: #000000; font-weight: bold;">/</span> https:<span style="color: #000000; font-weight: bold;">//</span>proxy.qing.su<span style="color: #000000; font-weight: bold;">/</span><br />
map https:<span style="color: #000000; font-weight: bold;">//</span>proxy.qing.su<span style="color: #000000; font-weight: bold;">/</span> https:<span style="color: #000000; font-weight: bold;">//</span>origin.qing.su<span style="color: #000000; font-weight: bold;">/</span><br />
reverse_map https:<span style="color: #000000; font-weight: bold;">//</span>origin.qing.su<span style="color: #000000; font-weight: bold;">/</span> https:<span style="color: #000000; font-weight: bold;">//</span>proxy.qing.su<span style="color: #000000; font-weight: bold;">/</span><br />
map <span style="color: #000000; font-weight: bold;">/</span> https:<span style="color: #000000; font-weight: bold;">//</span>origin.qing.su<span style="color: #000000; font-weight: bold;">/</span></div></td></tr></tbody></table></div><p>保存退出即可。</p><p>&nbsp;</p><h2>4, 配置缓存规则</h2><p>通过缓存的配置，我们能够节省服务器资源，且使得访问速度得到提升。编辑文件<em><strong>records.config</strong></em>, 设置下面的行：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">CONFIG proxy.config.http.cache.http INT <span style="color: #000000;">1</span><br />
CONFIG proxy.config.http.cache.ignore_client_cc_max_age INT <span style="color: #000000;">1</span><br />
CONFIG proxy.config.http.normalize_ae_gzip INT <span style="color: #000000;">1</span><br />
CONFIG proxy.config.http.cache.cache_responses_to_cookies INT <span style="color: #000000;">1</span><br />
CONFIG proxy.config.http.cache.cache_urls_that_look_dynamic INT <span style="color: #000000;">1</span><br />
CONFIG proxy.config.http.cache.when_to_revalidate INT <span style="color: #000000;">0</span><br />
CONFIG proxy.config.http.cache.required_headers INT <span style="color: #000000;">2</span><br />
CONFIG proxy.config.http.cache.ignore_client_no_cache INT <span style="color: #000000;">1</span></div></td></tr></tbody></table></div><p>其中的参数设置我将在下一篇搭建CDN的教程中具体介绍。对于一个简单高效的反向代理实例，上面这些设置一般能够满足需求。</p><p>再编辑文件<em><strong>storage.config</strong></em>.  在这里我们可以设置分配给服务器用来储存缓存内容的空间。我们这里设置为2 GB.</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">var<span style="color: #000000; font-weight: bold;">/</span>trafficserver 2048M</div></td></tr></tbody></table></div><p>&nbsp;</p><h2>5, 配置SSL证书</h2><p>我们可以在Traffic Server中配置SSL证书，实现网站的安全访问。如果您反代的是自己的源站，那么我建议您去掉源站的SSL证书，这样可以减轻源站的负载。源站是否配置SSL对于前端反代站的设置没有任何影响。</p><p>首先，我们新建一个目录，用于储存所有的SSL证书。</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap"><span style="color: #c20cb9; font-weight: bold;">mkdir</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>trafficserver<span style="color: #000000; font-weight: bold;">/</span>ssl<br />
<span style="color: #c20cb9; font-weight: bold;">chown</span> nobody <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>trafficserver<span style="color: #000000; font-weight: bold;">/</span>ssl<br />
<span style="color: #c20cb9; font-weight: bold;">chmod</span> 0760 <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>trafficserver<span style="color: #000000; font-weight: bold;">/</span>ssl</div></td></tr></tbody></table></div><p>然后，将对应域名的私钥和证书放在这个文件夹中。如果您的反代站域名和源站域名一样（比如CDN），您可以直接复制源站的证书。如果不一样，您需要为反代站的域名申请SSL证书。我们假设反代站私钥地址为<em><strong>/etc/trafficserver/ssl/proxy.qing.su.key</strong></em>, 反代站证书地址为<em><strong>/etc/trafficserver/ssl/proxy.qing.su.crt</strong></em>.</p><p>编辑文件<em><strong>records.config</strong></em>, 指明SSL证书存放目录。添加下面的行：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">CONFIG proxy.config.ssl.server.cert.path STRING <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>trafficserver<span style="color: #000000; font-weight: bold;">/</span>ssl<span style="color: #000000; font-weight: bold;">/</span><br />
CONFIG proxy.config.ssl.server.private_key.path STRING <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>trafficserver<span style="color: #000000; font-weight: bold;">/</span>ssl<span style="color: #000000; font-weight: bold;">/</span></div></td></tr></tbody></table></div><p>保存退出。然后编辑文件<em><strong>ssl_multicert.config</strong></em>.  添加下面的行：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap"><span style="color: #007800;">dest_ip</span>=88.88.88.88 <span style="color: #007800;">ssl_cert_name</span>=proxy.qing.su.crt <span style="color: #007800;">ssl_key_name</span>=proxy.qing.su.key</div></td></tr></tbody></table></div><p>其中，88.88.88.88为源站IP.  如果您有多个源站IP, 就添加多行。如果想要匹配所有IP, 可以用通配符<strong>*</strong>来匹配。这样，我们就指明了每个源站对应的SSL证书的文件名。</p><p>&nbsp;</p><h2>6, 运行Traffic Server</h2><p>每次修改配置文件后，需要重新载入配置文件，使得Traffic Server启用我们对配置文件做出的修改。</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">traffic_ctl config reload</div></td></tr></tbody></table></div><p>载入配置文件的过程中您可能遇到下面这样的报错：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">traffic_ctl: error <span style="color: #000000; font-weight: bold;">while</span> loading shared libraries: libtsmgmt.so.8: cannot open shared object file: No such <span style="color: #c20cb9; font-weight: bold;">file</span> or directory</div></td></tr></tbody></table></div><p><a href="https://qing.su/wp-content/uploads/2020/07/1-1.png"><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDMiIGhlaWdodD0iODIiIHZpZXdCb3g9IjAgMCA4MDMgODIiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=" loading="lazy" class="aligncenter size-full wp-image-2028" data-src="https://qing.su/wp-content/uploads/2020/07/1-1.png" alt="" width="803" height="82" data-srcset="https://qing.su/wp-content/uploads/2020/07/1-1.png 803w, https://qing.su/wp-content/uploads/2020/07/1-1-300x31.png 300w, https://qing.su/wp-content/uploads/2020/07/1-1-768x78.png 768w" data-sizes="(max-width: 803px) 100vw, 803px" /><noscript><img loading="lazy" class="aligncenter size-full wp-image-2028" src="https://qing.su/wp-content/uploads/2020/07/1-1.png" alt="" width="803" height="82" srcset="https://qing.su/wp-content/uploads/2020/07/1-1.png 803w, https://qing.su/wp-content/uploads/2020/07/1-1-300x31.png 300w, https://qing.su/wp-content/uploads/2020/07/1-1-768x78.png 768w" sizes="(max-width: 803px) 100vw, 803px" /></noscript></a></p><p>执行下面的命令即可：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">ldconfig</div></td></tr></tbody></table></div><p>如果载入配置文件的过程中遇到了下面这样的错误：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">traffic_ctl: server start failed: <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #000000;">5</span><span style="color: #7a0874; font-weight: bold;">&#93;</span> Error establishing socket connection.</div></td></tr></tbody></table></div><p><a href="https://qing.su/wp-content/uploads/2020/07/2-1.png"><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTYiIGhlaWdodD0iODEiIHZpZXdCb3g9IjAgMCA3OTYgODEiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=" loading="lazy" class="aligncenter size-full wp-image-2029" data-src="https://qing.su/wp-content/uploads/2020/07/2-1.png" alt="" width="796" height="81" data-srcset="https://qing.su/wp-content/uploads/2020/07/2-1.png 796w, https://qing.su/wp-content/uploads/2020/07/2-1-300x31.png 300w, https://qing.su/wp-content/uploads/2020/07/2-1-768x78.png 768w" data-sizes="(max-width: 796px) 100vw, 796px" /><noscript><img loading="lazy" class="aligncenter size-full wp-image-2029" src="https://qing.su/wp-content/uploads/2020/07/2-1.png" alt="" width="796" height="81" srcset="https://qing.su/wp-content/uploads/2020/07/2-1.png 796w, https://qing.su/wp-content/uploads/2020/07/2-1-300x31.png 300w, https://qing.su/wp-content/uploads/2020/07/2-1-768x78.png 768w" sizes="(max-width: 796px) 100vw, 796px" /></noscript></a></p><p>这种情况一般是Traffic Server没有启用。您可以执行<em>traffic_manager</em>运行Traffic Server, 或者使用下面的命令运行：</p><div class="codecolorer-container bash geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="bash codecolorer" style="white-space:nowrap">trafficserver start</div></td></tr></tbody></table></div><p>运行Traffic Server之后，访问我们的反代站网址，应该已经可以正常显示源站内容了。如果是一个动态网站，那么该站点的交互功能，比如表单、用户登录、评论等功能都应该可以正常使用了。比如，我随手用域名yaofan.shop反代了一下全球主机交流论坛的网站hostloc.com,  反代的站点和源站完全一样，可以正常注册，登录和评论。</p><p><a href="https://qing.su/wp-content/uploads/2020/07/3-1.png"><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjY3OCIgdmlld0JveD0iMCAwIDEwMjQgNjc4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" loading="lazy" class="aligncenter size-large wp-image-2030" data-src="https://qing.su/wp-content/uploads/2020/07/3-1-1024x678.png" alt="" width="1024" height="678" data-srcset="https://qing.su/wp-content/uploads/2020/07/3-1-1024x678.png 1024w, https://qing.su/wp-content/uploads/2020/07/3-1-300x199.png 300w, https://qing.su/wp-content/uploads/2020/07/3-1-768x509.png 768w, https://qing.su/wp-content/uploads/2020/07/3-1.png 1309w" data-sizes="(max-width: 1024px) 100vw, 1024px" /><noscript><img loading="lazy" class="aligncenter size-large wp-image-2030" src="https://qing.su/wp-content/uploads/2020/07/3-1-1024x678.png" alt="" width="1024" height="678" srcset="https://qing.su/wp-content/uploads/2020/07/3-1-1024x678.png 1024w, https://qing.su/wp-content/uploads/2020/07/3-1-300x199.png 300w, https://qing.su/wp-content/uploads/2020/07/3-1-768x509.png 768w, https://qing.su/wp-content/uploads/2020/07/3-1.png 1309w" sizes="(max-width: 1024px) 100vw, 1024px" /></noscript></a></p><p>&nbsp;</p><p>综上，我们使用Apache Traffic Server轻松实现了对源站的反向代理，并配置了缓存系统和SSL证书。下一篇教程，我们将介绍使用Traffic Server实现CDN功能。如果您遇到任何问题，欢迎在这里留言和我讨论。本文作者为香菇肥牛，原文链接为<a href="traffic-server-reverse-proxy.html" target="_blank" rel="noopener noreferrer">https://qing.su/article/traffic-server-reverse-proxy.html</a>, 转载需注明原文链接。谢谢！<div class="quads-location quads-ad1" id="quads-ad1" style="float:none;margin:0px;"> <script data-ad-client="ca-pub-0438043471702815" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> </div></div><footer class="entry-meta">
<span class="cat-links"><span class="gp-icon icon-categories"><svg viewBox="0 0 512 512" aria-hidden="true" role="img" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
<path d="M0 112c0-26.51 21.49-48 48-48h110.014a48 48 0 0 1 43.592 27.907l12.349 26.791A16 16 0 0 0 228.486 128H464c26.51 0 48 21.49 48 48v224c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112z" fill-rule="nonzero"/>
</svg></span><span class="screen-reader-text">Categories </span><a href="https://qing.su/category/tutorial" rel="category tag">VPS教程</a></span> <span class="tags-links"><span class="gp-icon icon-tags"><svg viewBox="0 0 512 512" aria-hidden="true" role="img" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
<path d="M20 39.5c-8.836 0-16 7.163-16 16v176c0 4.243 1.686 8.313 4.687 11.314l224 224c6.248 6.248 16.378 6.248 22.626 0l176-176c6.244-6.244 6.25-16.364.013-22.615l-223.5-224A15.999 15.999 0 0 0 196.5 39.5H20zm56 96c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24z"/>
<path d="M259.515 43.015c4.686-4.687 12.284-4.687 16.97 0l228 228c4.686 4.686 4.686 12.284 0 16.97l-180 180c-4.686 4.687-12.284 4.687-16.97 0-4.686-4.686-4.686-12.284 0-16.97L479.029 279.5 259.515 59.985c-4.686-4.686-4.686-12.284 0-16.97z" fill-rule="nonzero"/>
</svg></span><span class="screen-reader-text">Tags </span><a href="https://qing.su/tag/apache-traffic-server" rel="tag">Apache Traffic Server</a>, <a href="https://qing.su/tag/ats" rel="tag">ATS</a>, <a href="https://qing.su/tag/cdn" rel="tag">CDN</a>, <a href="https://qing.su/tag/reverse-proxy" rel="tag">Reverse Proxy</a>, <a href="https://qing.su/tag/traffic-server" rel="tag">Traffic Server</a>, <a href="https://qing.su/tag/%e5%8f%8d%e4%bb%a3" rel="tag">反代</a>, <a href="https://qing.su/tag/%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86" rel="tag">反向代理</a>, <a href="https://qing.su/tag/%e7%bc%93%e5%ad%98" rel="tag">缓存</a></span><nav id="nav-below" class="post-navigation">
<span class="screen-reader-text">Post navigation</span><div class="nav-previous"><span class="gp-icon icon-arrow-left"><svg viewBox="0 0 192 512" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414">
<path d="M178.425 138.212c0 2.265-1.133 4.813-2.832 6.512L64.276 256.001l111.317 111.277c1.7 1.7 2.832 4.247 2.832 6.513 0 2.265-1.133 4.813-2.832 6.512L161.43 394.46c-1.7 1.7-4.249 2.832-6.514 2.832-2.266 0-4.816-1.133-6.515-2.832L16.407 262.514c-1.699-1.7-2.832-4.248-2.832-6.513 0-2.265 1.133-4.813 2.832-6.512l131.994-131.947c1.7-1.699 4.249-2.831 6.515-2.831 2.265 0 4.815 1.132 6.514 2.831l14.163 14.157c1.7 1.7 2.832 3.965 2.832 6.513z" fill-rule="nonzero"/>
</svg></span><span class="prev" title="Previous"><a href="https://qing.su/article/install-discourse-without-docker.html" rel="prev">手动安装Discourse论坛程序</a></span></div><div class="nav-next"><span class="gp-icon icon-arrow-right"><svg viewBox="0 0 192 512" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414">
<path d="M178.425 256.001c0 2.266-1.133 4.815-2.832 6.515L43.599 394.509c-1.7 1.7-4.248 2.833-6.514 2.833s-4.816-1.133-6.515-2.833l-14.163-14.162c-1.699-1.7-2.832-3.966-2.832-6.515 0-2.266 1.133-4.815 2.832-6.515l111.317-111.316L16.407 144.685c-1.699-1.7-2.832-4.249-2.832-6.515s1.133-4.815 2.832-6.515l14.163-14.162c1.7-1.7 4.249-2.833 6.515-2.833s4.815 1.133 6.514 2.833l131.994 131.993c1.7 1.7 2.832 4.249 2.832 6.515z" fill-rule="nonzero"/>
</svg></span><span class="next" title="Next"><a href="https://qing.su/article/traffic-server-cdn-cluster.html" rel="next">使用Traffic Server组建高性能的CDN集群</a></span></div></nav></footer></div></article><div class="comments-area"><div id="comments"><h3 class="comments-title">11 thoughts on &ldquo;使用Traffic Server实现高性能反向代理&rdquo;</h3><ol class="comment-list"><li id="comment-44896" class="comment even thread-even depth-1 parent"><article id="div-comment-44896" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/29ab0ccf1dc89205854ff47c3913789a.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/b5cc94e4a69610c5fa9611b5ee8f23db.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/29ab0ccf1dc89205854ff47c3913789a.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/b5cc94e4a69610c5fa9611b5ee8f23db.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn">游乐王子</cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44896">
<time datetime="2020-07-13T22:32:56-05:00" itemprop="datePublished">
07/13/2020 at 22:32								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>老哥，反代大文件下载，如何配置缓存规则？</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44896#respond' data-commentid="44896" data-postid="2024" data-belowelement="div-comment-44896" data-respondelement="respond" data-replyto="Reply to 游乐王子" aria-label='Reply to 游乐王子'>Reply</a></span></div></article><ul class="children"><li id="comment-44898" class="comment odd alt depth-2 parent"><article id="div-comment-44898" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/08f27e72cfafe02c181cff73e6afe52a.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/939ca9f7c9a9e00b163b997720c562ba.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/08f27e72cfafe02c181cff73e6afe52a.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/939ca9f7c9a9e00b163b997720c562ba.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn">ColinWood</cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44898">
<time datetime="2020-07-13T22:47:36-05:00" itemprop="datePublished">
07/13/2020 at 22:47								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>等下一个教程</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44898#respond' data-commentid="44898" data-postid="2024" data-belowelement="div-comment-44898" data-respondelement="respond" data-replyto="Reply to ColinWood" aria-label='Reply to ColinWood'>Reply</a></span></div></article><ul class="children"><li id="comment-44901" class="comment byuser comment-author-shc bypostauthor even depth-3"><article id="div-comment-44901" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn"><a href='https://qing.su' rel='external nofollow ugc' class='url'>香菇肥牛</a></cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44901">
<time datetime="2020-07-13T23:59:04-05:00" itemprop="datePublished">
07/13/2020 at 23:59								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>感谢大佬支持~</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44901#respond' data-commentid="44901" data-postid="2024" data-belowelement="div-comment-44901" data-respondelement="respond" data-replyto="Reply to 香菇肥牛" aria-label='Reply to 香菇肥牛'>Reply</a></span></div></article></li></ul></li><li id="comment-44900" class="comment byuser comment-author-shc bypostauthor odd alt depth-2"><article id="div-comment-44900" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn"><a href='https://qing.su' rel='external nofollow ugc' class='url'>香菇肥牛</a></cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44900">
<time datetime="2020-07-13T23:57:24-05:00" itemprop="datePublished">
07/13/2020 at 23:57								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>上面列出来的规则就可以缓存大文件的，如果文件太大的话需要增加storage.config文件里面的磁盘配额，其他没有特殊要求~</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44900#respond' data-commentid="44900" data-postid="2024" data-belowelement="div-comment-44900" data-respondelement="respond" data-replyto="Reply to 香菇肥牛" aria-label='Reply to 香菇肥牛'>Reply</a></span></div></article></li></ul></li><li id="comment-44903" class="comment even thread-odd thread-alt depth-1 parent"><article id="div-comment-44903" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/d2421bd7fc1ebdbe62158a2e658d9ba5.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/640413a0acdf5e6fb14faf613202ea61.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/d2421bd7fc1ebdbe62158a2e658d9ba5.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/640413a0acdf5e6fb14faf613202ea61.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn">www</cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44903">
<time datetime="2020-07-14T00:27:25-05:00" itemprop="datePublished">
07/14/2020 at 00:27								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>适合反代google吗？平常要用到搜索一些文献。</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44903#respond' data-commentid="44903" data-postid="2024" data-belowelement="div-comment-44903" data-respondelement="respond" data-replyto="Reply to www" aria-label='Reply to www'>Reply</a></span></div></article><ul class="children"><li id="comment-44904" class="comment byuser comment-author-shc bypostauthor odd alt depth-2"><article id="div-comment-44904" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn"><a href='https://qing.su' rel='external nofollow ugc' class='url'>香菇肥牛</a></cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44904">
<time datetime="2020-07-14T00:43:02-05:00" itemprop="datePublished">
07/14/2020 at 00:43								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>Google比较麻烦，需要设置特殊的headers, 建议直接用Nginx现成的谷歌反代一键包来安装</p><pre>--add-module=/home/username/nginx/ngx_http_substitutions_filter_module \
--add-module=/home/username/nginx/ngx_http_google_filter_module</pre><span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44904#respond' data-commentid="44904" data-postid="2024" data-belowelement="div-comment-44904" data-respondelement="respond" data-replyto="Reply to 香菇肥牛" aria-label='Reply to 香菇肥牛'>Reply</a></span></div></article></li></ul></li><li id="comment-44906" class="comment even thread-even depth-1 parent"><article id="div-comment-44906" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/91b91bc849714adaf7cb4b865dc29987.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/fda7e758adba012834bf905517f91c5c.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/91b91bc849714adaf7cb4b865dc29987.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/fda7e758adba012834bf905517f91c5c.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn">rstsession</cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44906">
<time datetime="2020-07-14T03:59:12-05:00" itemprop="datePublished">
07/14/2020 at 03:59								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>不错，收藏了。</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44906#respond' data-commentid="44906" data-postid="2024" data-belowelement="div-comment-44906" data-respondelement="respond" data-replyto="Reply to rstsession" aria-label='Reply to rstsession'>Reply</a></span></div></article><ul class="children"><li id="comment-44909" class="comment byuser comment-author-shc bypostauthor odd alt depth-2"><article id="div-comment-44909" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn"><a href='https://qing.su' rel='external nofollow ugc' class='url'>香菇肥牛</a></cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44909">
<time datetime="2020-07-14T09:51:36-05:00" itemprop="datePublished">
07/14/2020 at 09:51								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>感谢支持!</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44909#respond' data-commentid="44909" data-postid="2024" data-belowelement="div-comment-44909" data-respondelement="respond" data-replyto="Reply to 香菇肥牛" aria-label='Reply to 香菇肥牛'>Reply</a></span></div></article></li></ul></li><li id="comment-44907" class="comment even thread-odd thread-alt depth-1 parent"><article id="div-comment-44907" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/996dc920e64d4007dd09023d0934fbcb.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/071345527d10536f62fc2f22f92a67af.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/996dc920e64d4007dd09023d0934fbcb.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/071345527d10536f62fc2f22f92a67af.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn">jin</cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44907">
<time datetime="2020-07-14T05:53:36-05:00" itemprop="datePublished">
07/14/2020 at 05:53								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>重启之后就没了</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44907#respond' data-commentid="44907" data-postid="2024" data-belowelement="div-comment-44907" data-respondelement="respond" data-replyto="Reply to jin" aria-label='Reply to jin'>Reply</a></span></div></article><ul class="children"><li id="comment-44910" class="comment byuser comment-author-shc bypostauthor odd alt depth-2"><article id="div-comment-44910" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/da02e1c3cf0018e382aa93647fe978c7.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/ce2214169cd30e2c34d6e6a9b24998fd.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn"><a href='https://qing.su' rel='external nofollow ugc' class='url'>香菇肥牛</a></cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-44910">
<time datetime="2020-07-14T09:52:12-05:00" itemprop="datePublished">
07/14/2020 at 09:52								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>重启之后执行</p><div class="codecolorer-container text geshi" style="overflow:auto;white-space:nowrap;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer" style="white-space:nowrap">trafficserver start</div></td></tr></tbody></table></div><p>就可以了。如果不想每次手动启动的话，可以把这行命令加进/etc/rc.local文件。</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=44910#respond' data-commentid="44910" data-postid="2024" data-belowelement="div-comment-44910" data-respondelement="respond" data-replyto="Reply to 香菇肥牛" aria-label='Reply to 香菇肥牛'>Reply</a></span></div></article></li></ul></li><li id="comment-73222" class="comment even thread-even depth-1"><article id="div-comment-73222" class="comment-body" itemtype="https://schema.org/Comment" itemscope><footer class="comment-meta">
<img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+" alt='' data-src='https://qing.su/wp-content/litespeed/avatar/52f4b1a158ad53e09ac4b51c1219ace4.jpg' data-srcset='https://qing.su/wp-content/litespeed/avatar/d2ee43084df63207bc54734cceeedd40.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/><noscript><img alt='' src='https://qing.su/wp-content/litespeed/avatar/52f4b1a158ad53e09ac4b51c1219ace4.jpg' srcset='https://qing.su/wp-content/litespeed/avatar/d2ee43084df63207bc54734cceeedd40.jpg 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'/></noscript><div class="comment-author-info"><div class="comment-author vcard" itemprop="author" itemtype="https://schema.org/Person" itemscope>
<cite itemprop="name" class="fn"><a href='https://linktr.ee/mortgagebrokerla' rel='external nofollow ugc' class='url'>linktr.ee</a></cite></div><div class="entry-meta comment-metadata">
<a href="traffic-server-reverse-proxy.html#comment-73222">
<time datetime="2021-09-13T13:19:54-05:00" itemprop="datePublished">
09/13/2021 at 13:19								</time>
</a></div></div></footer><div class="comment-content" itemprop="text"><p>Fabulous, what a web site it is! This blog gives helpful<br />
facts to us, keep it up.</p>
<span class="reply"><a rel='nofollow' class='comment-reply-link' href='https://qing.su/article/traffic-server-reverse-proxy.html?replytocom=73222#respond' data-commentid="73222" data-postid="2024" data-belowelement="div-comment-73222" data-respondelement="respond" data-replyto="Reply to linktr.ee" aria-label='Reply to linktr.ee'>Reply</a></span></div></article></li></ol><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title">Leave a Comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="traffic-server-reverse-proxy.html#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://qing.su/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><p class="comment-form-comment"><label for="comment" class="screen-reader-text">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true" required></textarea></p><label for="author" class="screen-reader-text">Name</label><input placeholder="Name *" id="author" name="author" type="text" value="" size="30" />
<label for="email" class="screen-reader-text">Email</label><input placeholder="Email *" id="email" name="email" type="email" value="" size="30" />
<label for="url" class="screen-reader-text">Website</label><input placeholder="Website" id="url" name="url" type="url" value="" size="30" /><p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='2024' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' /></p></form></div></div></div></main></div></div></div><div class="site-footer grid-container grid-parent"><div id="footer-widgets" class="site footer-widgets"><div class="footer-widgets-container grid-container grid-parent"><div class="inside-footer-widgets"><div class="footer-widget-1 grid-parent grid-100 tablet-grid-50 mobile-grid-100"><aside id="custom_html-5" class="widget_text widget inner-padding widget_custom_html"><h2 class="widget-title">朋友们的网站</h2><div class="textwidget custom-html-widget"><a href="http://www.kvm.la/" target="_blank" rel="noopener">kvm.la</a> | <a href="http://www.hhtjim.com/" target="_blank" rel="noopener">HHTjim'S 部落格</a> | <a href="http://www.wumao.org" target="_blank" rel="noopener">五毛的笔记本</a> | <a href="http://madlax.pw/" target="_blank" rel="noopener">Madlaxcb的杂物房</a> | <a href="https://eqblog.com/" target="_blank" rel="noopener">EQblog</a> | <a href="https://easonyang.com/" target="_blank" rel="noopener">Eason Yang's Blog</a> | <a href="https://liyuans.com/" target="_blank" rel="noopener">Leonn的博客</a> | <a href="https://www.aptx4869.org/" target="_blank" rel="noopener">阿七's Blog</a> | <a href="https://www.mrkevin.net/" target="_blank" rel="noopener">Mr. KevinH</a> | <a href="https://sunpma.com/" target="_blank" rel="noopener">SunPma'Blog</a> | <a href="https://kkp.disk.st" target="_blank" rel="noopener">Ryan's Blog</a> | <a href="https://fengli.su/" target="_blank" rel="noopener">凤梨酥</a> | <a href="https://zhujisou.com/" target="_blank" rel="noopener">主机搜</a> | <a href="https://www.kaifashuo.com/" target="_blank" rel="noopener">开发说</a> | <a href="https://www.xiaoz.me/" target="_blank" rel="noopener">小z博客</a> | <a href="https://inwao.com/" target="_blank" rel="noopener">inwao blog</a> | <a href="https://roov.org/" target="_blank" rel="noopener">reizhi</a> | <a href="https://tlanyan.me/" target="_blank" rel="noopener">tlanyan</a> | <a href="https://sugarless.top/" target="_blank" rel="noopener">无糖的小宇宙</a></div></aside></div></div></div></div><footer class="site-info" itemtype="https://schema.org/WPFooter" itemscope><div class="inside-site-info grid-container grid-parent"><div class="copyright-bar">
© 2020 香菇肥牛的博客 <a href="https://icp.gov.moe" target="_blank">萌ICP备 </a><a href="https://icp.gov.moe/?keyword=202063130" target="_blank"> 202063130号</a></div></div></footer></div><a title="Scroll back to top" aria-label="Scroll back to top" rel="nofollow" href="traffic-server-reverse-proxy.html#" class="generate-back-to-top" style="opacity:0;visibility:hidden;" data-scroll-speed="400" data-start-scroll="300">
<span class="gp-icon icon-arrow-up"><svg viewBox="0 0 330 512" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414">
<path d="M305.863 314.916c0 2.266-1.133 4.815-2.832 6.514l-14.157 14.163c-1.699 1.7-3.964 2.832-6.513 2.832-2.265 0-4.813-1.133-6.512-2.832L164.572 224.276 53.295 335.593c-1.699 1.7-4.247 2.832-6.512 2.832-2.265 0-4.814-1.133-6.513-2.832L26.113 321.43c-1.699-1.7-2.831-4.248-2.831-6.514s1.132-4.816 2.831-6.515L158.06 176.408c1.699-1.7 4.247-2.833 6.512-2.833 2.265 0 4.814 1.133 6.513 2.833L303.03 308.4c1.7 1.7 2.832 4.249 2.832 6.515z" fill-rule="nonzero"/>
</svg></span>
</a><script  type="text/javascript">var _paq = window._paq || [];
_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);_paq.push(['setTrackerUrl', "\/\/qing.su\/wp-content\/plugins\/matomo\/app\/matomo.php"]);_paq.push(['setSiteId', '1']);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
g.type='text/javascript'; g.async=true; g.defer=true; g.src="\/\/qing.su\/wp-content\/uploads\/matomo\/matomo.js"; s.parentNode.insertBefore(g,s);</script><script data-optimized="1" src='https://qing.su/wp-content/litespeed/js/bf8caf79e8fe5972c8636330212c3267.js' id='generate-sticky-js'></script> <!--[if lte IE 11]> <script src='https://qing.su/wp-content/themes/generatepress/assets/js/classList.min.js' id='generate-classlist-js'></script> <![endif]--> <script id='generate-main-js-extra'>var generatepressMenu = {"toggleOpenedSubMenus":"1","openSubMenuLabel":"Open Sub-Menu","closeSubMenuLabel":"Close Sub-Menu"};</script> <script data-optimized="1" src='https://qing.su/wp-content/litespeed/js/4dc6782b5f41d1b78979d4b6f7e957cb.js' id='generate-main-js'></script> <script data-optimized="1" src='https://qing.su/wp-content/litespeed/js/4346fd177fea8c2f040d32c7b51369ec.js' id='generate-back-to-top-js'></script> <script data-optimized="1" src='https://qing.su/wp-content/litespeed/js/9bfb4d4254dc432ed4295a268a296e2f.js' id='comment-reply-js'></script> <script data-optimized="1" src='https://qing.su/wp-content/litespeed/js/33e4c53de0006c0929d0239558dfcfb1.js' id='wp-embed-js'></script> <script data-optimized="1" src='https://qing.su/wp-content/litespeed/js/74c98acdf575c81e0a4f8bdaab378c12.js' id='quads-admin-ads-js'></script> <script data-no-optimize="1">var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,o=arguments[e];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.LazyLoad=e()}(this,function(){"use strict";function r(t,e){return t.getAttribute(o+e)}function s(t,e,n){e=o+e,null!==n?t.setAttribute(e,n):t.removeAttribute(e)}function i(t){return r(t,u)===f}function l(t,e){return s(t,d,e),0}function c(t){return r(t,d)}function a(t,e){var n,o="LazyLoad::Initialized",s=new t(e);try{n=new CustomEvent(o,{detail:{instance:s}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(o,!1,!1,{instance:s})}window.dispatchEvent(n)}var n={elements_selector:"img",container:document,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"litespeed-loading",class_loaded:"litespeed-loaded",class_error:"error",load_delay:0,callback_load:null,callback_error:null,callback_set:null,callback_enter:null,callback_finish:null,to_webp:!1},o="data-",u="was-processed",d="ll-timeout",f="true";function _(t,e){return e?t.replace(/\.(jpe?g|png)/gi,".webp"):t}function h(t,e,n,o){for(var s,i,a=0;s=t.children[a];a+=1)"SOURCE"===s.tagName&&(i=r(s,n),A(s,e,i,o))}function b(t,e){var n,o,s=e._settings,i=t.tagName;if(i=C[i])return i(t,s),e._updateLoadingCount(1),e._elements=(o=e._elements,n=t,o.filter(function(t){return t!==n})),0;e=t,o=s,t=z&&o.to_webp,s=r(e,o.data_src),o=r(e,o.data_bg),s&&(s=_(s,t),e.style.backgroundImage='url("'+s+'")'),o&&(t=_(o,t),e.style.backgroundImage=t)}function g(t,e){k?t.classList.add(e):t.className+=(t.className?" ":"")+e}function m(t,e){t&&t(e)}function v(t,e,n){t.addEventListener(e,n)}function p(t,e,n){t.removeEventListener(e,n)}function y(t,e,n){p(t,N,e),p(t,S,e),p(t,x,n)}function w(t,e,n){var o=n._settings,s=e?o.class_loaded:o.class_error,i=e?o.callback_load:o.callback_error,e=t.target;t=e,o=o.class_loading,k?t.classList.remove(o):t.className=t.className.replace(new RegExp("(^|\\s+)"+o+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""),g(e,s),m(i,e),n._updateLoadingCount(-1)}function E(n,o){function s(t){w(t,!0,o),y(n,s,a)}var t,e,i,a=function t(e){w(e,!1,o),y(n,s,t)};i=a,v(t=n,N,e=s),v(t,S,e),v(t,x,i)}function L(t,e,n){R(t,n),e.unobserve(t)}function I(t){var e=c(t);e&&(clearTimeout(e),l(t,null))}var t="undefined"!=typeof window,O=t&&!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),e=t&&"IntersectionObserver"in window,k=t&&"classList"in document.createElement("p"),z=t&&!1,A=function(t,e,n,o){n&&t.setAttribute(e,_(n,o))},C={IMG:function(t,e){var n=z&&e.to_webp,o=e.data_srcset,s=t.parentNode;s&&"PICTURE"===s.tagName&&h(s,"srcset",o,n);s=r(t,e.data_sizes);A(t,"sizes",s);o=r(t,o);A(t,"srcset",o,n);e=r(t,e.data_src);A(t,"src",e,n)},IFRAME:function(t,e){e=r(t,e.data_src);A(t,"src",e)},VIDEO:function(t,e){var n=e.data_src,e=r(t,n);h(t,"src",n),A(t,"src",e),t.load()}},N="load",S="loadeddata",x="error",M=["IMG","IFRAME","VIDEO"];function R(t,e,n){var o=e._settings;!n&&i(t)||(m(o.callback_enter,t),-1<M.indexOf(t.tagName)&&(E(t,e),g(t,o.class_loading)),b(t,e),s(t,u,f),m(o.callback_set,t))}function j(t){return t.isIntersecting||0<t.intersectionRatio}function T(t,e){this._settings=_extends({},n,t),this._setObserver(),this._loadingCount=0,this.update(e)}return T.prototype={_manageIntersection:function(t){var e,n,o,s,i=this._observer,a=this._settings.load_delay,r=t.target;a?j(t)?(e=r,n=i,s=(o=this)._settings.load_delay,(a=c(e))||(a=setTimeout(function(){L(e,n,o),I(e)},s),l(e,a))):I(r):j(t)&&L(r,i,this)},_onIntersection:function(t){t.forEach(this._manageIntersection.bind(this))},_setObserver:function(){var t;e&&(this._observer=new IntersectionObserver(this._onIntersection.bind(this),{root:(t=this._settings).container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}))},_updateLoadingCount:function(t){this._loadingCount+=t,0===this._elements.length&&0===this._loadingCount&&m(this._settings.callback_finish)},update:function(t){var e=this,n=this._settings,n=t||n.container.querySelectorAll(n.elements_selector);this._elements=Array.prototype.slice.call(n).filter(function(t){return!i(t)}),!O&&this._observer?this._elements.forEach(function(t){e._observer.observe(t)}):this.loadAll()},destroy:function(){var e=this;this._observer&&(this._elements.forEach(function(t){e._observer.unobserve(t)}),this._observer=null),this._elements=null,this._settings=null},load:function(t,e){R(t,this,e)},loadAll:function(){var e=this;this._elements.forEach(function(t){e.load(t)})}},t&&function(t,e){if(e)if(e.length)for(var n,o=0;n=e[o];o+=1)a(t,n);else a(t,e)}(T,window.lazyLoadOptions),T}),function(t,e){"use strict";function n(){e.body.classList.add("litespeed_lazyloaded")}function o(){console.log("[LiteSpeed] Start Lazyload image"),s=new LazyLoad({elements_selector:"[data-lazyloaded]",callback_finish:n}),i=function(){s.update()},t.MutationObserver&&new MutationObserver(i).observe(e.documentElement,{childList:!0,subtree:!0,attributes:!0})}var s,i;t.addEventListener?t.addEventListener("load",o,!1):t.attachEvent("onload",o)}(window,document);</script></body></html>
<!-- Page optimized by LiteSpeed Cache @2021-09-16 22:53:57 -->
<!-- Page generated by LiteSpeed Cache 4.4 on 2021-09-16 17:53:57 -->